@model JohnHenryFashionWeb.ViewModels.SellerOrderDetailViewModel
@using System.Text.Json

@{
    ViewData["Title"] = $"Chi tiết đơn hàng #{Model.OrderNumber}";
    Layout = "~/Views/Shared/_SellerLayout.cshtml";
    
    // Parse shipping address from JSON
    string displayShippingAddress = "N/A";
    if (!string.IsNullOrEmpty(Model.ShippingAddress))
    {
        try
        {
            var addressObj = JsonSerializer.Deserialize<Dictionary<string, object>>(Model.ShippingAddress);
            if (addressObj != null)
            {
                var parts = new List<string>();
                
                if (addressObj.ContainsKey("fullName") && addressObj["fullName"] != null)
                    parts.Add(addressObj["fullName"].ToString() ?? "");
                if (addressObj.ContainsKey("phoneNumber") && addressObj["phoneNumber"] != null)
                    parts.Add("SĐT: " + (addressObj["phoneNumber"].ToString() ?? ""));
                if (addressObj.ContainsKey("address") && addressObj["address"] != null)
                    parts.Add(addressObj["address"].ToString() ?? "");
                if (addressObj.ContainsKey("ward") && addressObj["ward"] != null)
                    parts.Add(addressObj["ward"].ToString() ?? "");
                if (addressObj.ContainsKey("district") && addressObj["district"] != null)
                    parts.Add(addressObj["district"].ToString() ?? "");
                if (addressObj.ContainsKey("city") && addressObj["city"] != null)
                    parts.Add(addressObj["city"].ToString() ?? "");
                
                if (parts.Any())
                    displayShippingAddress = string.Join(", ", parts.Where(p => !string.IsNullOrWhiteSpace(p)));
            }
        }
        catch
        {
            displayShippingAddress = Model.ShippingAddress;
        }
    }
}

@functions {
    string GetStatusBadgeClass(string status)
    {
        return status.ToLower() switch {
            "pending" => "warning",
            "processing" => "info",
            "shipped" => "primary",
            "delivered" => "success",
            "cancelled" => "danger",
            _ => "secondary"
        };
    }
    
    string GetStatusText(string status)
    {
        return status.ToLower() switch {
            "pending" => "Chờ xử lý",
            "processing" => "Đang xử lý",
            "shipped" => "Đã gửi hàng",
            "delivered" => "Đã giao hàng",
            "cancelled" => "Đã hủy",
            _ => status
        };
    }
    
    string GetStatusIcon(string status)
    {
        return status.ToLower() switch {
            "pending" => "clock",
            "processing" => "loader",
            "shipped" => "truck",
            "delivered" => "check-circle",
            "cancelled" => "x-circle",
            _ => "circle"
        };
    }
    
    string GetPaymentStatusBadgeClass(string status)
    {
        return status.ToLower() switch {
            "paid" => "success",
            "pending" => "warning",
            "cod_pending" => "info",
            "awaiting_transfer" => "warning",
            "failed" => "danger",
            "refunded" => "info",
            _ => "secondary"
        };
    }
    
    string GetPaymentStatusText(string status)
    {
        return status.ToLower() switch {
            "paid" => "Đã thanh toán",
            "pending" => "Chờ thanh toán",
            "cod_pending" => "COD - Chờ thanh toán",
            "awaiting_transfer" => "Chờ chuyển khoản",
            "failed" => "Thất bại",
            "refunded" => "Đã hoàn tiền",
            _ => status
        };
    }
}

<div class="admin-content">
    <!-- Page Header -->
    <div class="admin-header" style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1rem;">
        <div>
            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                <a href="@Url.Action("Orders", "Seller")" class="admin-btn admin-btn-sm admin-btn-secondary">
                    <i data-lucide="arrow-left"></i>
                </a>
                <h1 class="admin-page-title" style="margin: 0;">
                    <i data-lucide="file-text"></i>
                    Chi tiết đơn hàng #@Model.OrderNumber
                </h1>
            </div>
            <p style="color: var(--admin-text-light); margin: 0;">
                Đặt ngày @Model.CreatedAt.ToString("dd/MM/yyyy 'lúc' HH:mm")
            </p>
        </div>
        <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
            <button type="button" class="admin-btn admin-btn-secondary" onclick="window.print()">
                <i data-lucide="printer"></i>
                In hóa đơn
            </button>
            @if (Model.CanUpdateStatus && Model.AvailableStatusTransitions.Any())
            {
                <button type="button" class="admin-btn admin-btn-primary" data-bs-toggle="modal" data-bs-target="#updateStatusModal">
                    <i data-lucide="edit"></i>
                    Cập nhật trạng thái
                </button>
            }
        </div>
    </div>

    <!-- Order Status Banner -->
    <div style="margin-bottom: var(--spacing-lg);">
        <div class="admin-card">
            <div class="admin-card-body">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1.5rem;">
                    <div>
                        <h5 style="margin-bottom: 0.75rem; font-weight: 600;">Trạng thái đơn hàng</h5>
                        <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                            <span class="admin-badge admin-badge-@GetStatusBadgeClass(Model.Status)" style="font-size: 1rem; padding: 0.5rem 1rem;">
                                <i data-lucide="@GetStatusIcon(Model.Status)"></i>
                                @GetStatusText(Model.Status)
                            </span>
                            <span style="color: var(--admin-text-muted);">|</span>
                            <span class="admin-badge admin-badge-@GetPaymentStatusBadgeClass(Model.PaymentStatus)">
                                <i data-lucide="credit-card"></i>
                                @GetPaymentStatusText(Model.PaymentStatus)
                            </span>
                            <span style="color: var(--admin-text-muted);">|</span>
                            <span style="color: var(--admin-text-light);">
                                <i data-lucide="banknote" style="width: 16px; height: 16px; vertical-align: middle;"></i>
                                @Model.PaymentMethod
                            </span>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: var(--admin-text-muted); font-size: 0.875rem; margin-bottom: 0.25rem;">Cập nhật lần cuối</div>
                        <div style="font-weight: 600;">@Model.UpdatedAt.ToString("dd/MM/yyyy HH:mm")</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr; gap: var(--spacing-lg);">
        @* Left Column *@
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--spacing-lg);">
            <div>
                <!-- Customer Information -->
                <div class="admin-card" style="margin-bottom: var(--spacing-lg);">
                    <div class="admin-card-header">
                        <h3 class="admin-card-title">
                            <i data-lucide="user" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 0.5rem;"></i>
                            Thông tin khách hàng
                        </h3>
                    </div>
                    <div class="admin-card-body">
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                            <div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="color: var(--admin-text-muted); font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">Họ tên</label>
                                    <div style="font-weight: 600;">@Model.CustomerName</div>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="color: var(--admin-text-muted); font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">Email</label>
                                    <div>
                                        <a href="mailto:@Model.CustomerEmail" style="text-decoration: none; color: var(--admin-primary);">
                                            @Model.CustomerEmail
                                        </a>
                                    </div>
                                </div>
                                @if (!string.IsNullOrEmpty(Model.CustomerPhone))
                                {
                                    <div style="margin-bottom: 0;">
                                        <label style="color: var(--admin-text-muted); font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">Số điện thoại</label>
                                        <div>
                                            <a href="tel:@Model.CustomerPhone" style="text-decoration: none; color: var(--admin-primary);">
                                                @Model.CustomerPhone
                                            </a>
                                        </div>
                                    </div>
                                }
                            </div>
                            <div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="color: var(--admin-text-muted); font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">Địa chỉ giao hàng</label>
                                    <div>@displayShippingAddress</div>
                                </div>
                                @if (!string.IsNullOrEmpty(Model.BillingAddress) && Model.BillingAddress != Model.ShippingAddress)
                                {
                                    <div style="margin-bottom: 0;">
                                        <label style="color: var(--admin-text-muted); font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">Địa chỉ thanh toán</label>
                                        <div>@Html.Raw(Model.BillingAddress.Replace("\n", "<br>"))</div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Order Items -->
                <div class="admin-card" style="margin-bottom: var(--spacing-lg);">
                    <div class="admin-card-header">
                        <h3 class="admin-card-title">
                            <i data-lucide="package" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 0.5rem;"></i>
                            Sản phẩm trong đơn hàng
                            @if (!Model.CanViewFullOrder)
                            {
                                <span class="admin-badge admin-badge-info" style="margin-left: 0.5rem;">Chỉ hiển thị sản phẩm của bạn</span>
                            }
                        </h3>
                    </div>
                    <div class="admin-card-body" style="padding: 0;">
                        <div class="admin-table-wrapper">
                            <table class="admin-table" style="margin-bottom: 0;">
                                <thead>
                                    <tr>
                                        <th style="width: 60%;">Sản phẩm</th>
                                        <th style="text-align: center; width: 15%;">Số lượng</th>
                                        <th style="text-align: right; width: 12.5%;">Đơn giá</th>
                                        <th style="text-align: right; width: 12.5%;">Thành tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model.OrderItems)
                                    {
                                        <tr>
                                            <td>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <img src="@item.ProductImage" alt="@item.ProductName" 
                                                         style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px;">
                                                    <div>
                                                        <div style="font-weight: 600; margin-bottom: 0.25rem;">@item.ProductName</div>
                                                        <small style="color: var(--admin-text-muted);">SKU: @item.ProductSKU</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td style="text-align: center; vertical-align: middle;">
                                                <span class="admin-badge admin-badge-secondary">@item.Quantity</span>
                                            </td>
                                            <td style="text-align: right; vertical-align: middle;">@item.UnitPrice.ToString("N0") ₫</td>
                                            <td style="text-align: right; vertical-align: middle; font-weight: 600;">@item.TotalPrice.ToString("N0") ₫</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Order Summary -->
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3 class="admin-card-title">
                            <i data-lucide="calculator" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 0.5rem;"></i>
                            Tổng quan đơn hàng
                        </h3>
                    </div>
                    <div class="admin-card-body">
                        <div style="display: flex; justify-content: flex-end;">
                            <div style="width: 100%; max-width: 400px;">
                                <table style="width: 100%; font-size: 0.9375rem;">
                                    <tbody>
                                        <tr>
                                            <td style="padding: 0.5rem 0;">Tạm tính:</td>
                                            <td style="text-align: right; padding: 0.5rem 0;">@Model.Subtotal.ToString("N0") ₫</td>
                                        </tr>
                                        @if (Model.DiscountAmount > 0)
                                        {
                                            <tr>
                                                <td style="padding: 0.5rem 0;">
                                                    Giảm giá
                                                    @if (!string.IsNullOrEmpty(Model.CouponCode))
                                                    {
                                                        <span style="color: var(--admin-text-muted);">(@Model.CouponCode)</span>
                                                    }:
                                                </td>
                                                <td style="text-align: right; padding: 0.5rem 0; color: var(--admin-success);">-@Model.DiscountAmount.ToString("N0") ₫</td>
                                            </tr>
                                        }
                                        @if (Model.ShippingFee > 0)
                                        {
                                            <tr>
                                                <td style="padding: 0.5rem 0;">Phí vận chuyển:</td>
                                                <td style="text-align: right; padding: 0.5rem 0;">@Model.ShippingFee.ToString("N0") ₫</td>
                                            </tr>
                                        }
                                        @if (Model.Tax > 0)
                                        {
                                            <tr>
                                                <td style="padding: 0.5rem 0;">Thuế:</td>
                                                <td style="text-align: right; padding: 0.5rem 0;">@Model.Tax.ToString("N0") ₫</td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot style="border-top: 2px solid var(--admin-border); background: var(--admin-bg-secondary);">
                                        <tr>
                                            <th style="padding: 0.75rem; font-weight: 600;">Tổng cộng:</th>
                                            <th style="text-align: right; padding: 0.75rem; color: var(--admin-primary); font-size: 1.25rem;">@Model.TotalAmount.ToString("N0") ₫</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>

                        @if (!string.IsNullOrEmpty(Model.Notes))
                        {
                            <div style="background: var(--admin-info-light); border-left: 4px solid var(--admin-info); padding: 1rem; margin-top: 1.5rem; border-radius: 4px;">
                                <strong>
                                    <i data-lucide="message-square" style="width: 16px; height: 16px; vertical-align: middle;"></i>
                                    Ghi chú:
                                </strong><br>
                                @Model.Notes
                            </div>
                        }
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div>
                <!-- Order Information -->
                <div class="admin-card" style="margin-bottom: var(--spacing-lg);">
                    <div class="admin-card-header">
                        <h3 class="admin-card-title">
                            <i data-lucide="info" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 0.5rem;"></i>
                            Thông tin đơn hàng
                        </h3>
                    </div>
                    <div class="admin-card-body">
                        <dl style="display: grid; grid-template-columns: auto 1fr; gap: 0.5rem 1rem; margin: 0;">
                            <dt style="color: var(--admin-text-muted);">Mã đơn:</dt>
                            <dd style="margin: 0;">
                                <code style="background: var(--admin-bg-secondary); padding: 0.25rem 0.5rem; border-radius: 4px; color: var(--admin-primary); font-weight: 600;">#@Model.OrderNumber</code>
                            </dd>
                            
                            <dt style="color: var(--admin-text-muted);">Ngày đặt:</dt>
                            <dd style="margin: 0;">@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")</dd>
                            
                            <dt style="color: var(--admin-text-muted);">Cập nhật:</dt>
                            <dd style="margin: 0;">@Model.UpdatedAt.ToString("dd/MM/yyyy HH:mm")</dd>
                            
                            @if (Model.ShippedAt.HasValue)
                            {
                                <dt style="color: var(--admin-text-muted);">Ngày gửi:</dt>
                                <dd style="margin: 0;">@Model.ShippedAt.Value.ToString("dd/MM/yyyy HH:mm")</dd>
                            }
                            
                            @if (Model.DeliveredAt.HasValue)
                            {
                                <dt style="color: var(--admin-text-muted);">Ngày giao:</dt>
                                <dd style="margin: 0;">@Model.DeliveredAt.Value.ToString("dd/MM/yyyy HH:mm")</dd>
                            }
                        </dl>
                    </div>
                </div>

                <!-- Status Timeline -->
                @if (Model.StatusHistory != null && Model.StatusHistory.Any())
                {
                    <div class="admin-card" style="margin-bottom: var(--spacing-lg);">
                        <div class="admin-card-header">
                            <h3 class="admin-card-title">
                                <i data-lucide="activity" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 0.5rem;"></i>
                                Lịch sử trạng thái
                            </h3>
                        </div>
                        <div class="admin-card-body">
                            <div class="timeline">
                                @foreach (var history in Model.StatusHistory.OrderByDescending(h => h.CreatedAt))
                                {
                                    <div class="timeline-item">
                                        <div class="timeline-marker bg-@GetStatusBadgeClass(history.Status)"></div>
                                        <div class="timeline-content">
                                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.25rem;">
                                                <span style="font-weight: 600;">@GetStatusText(history.Status)</span>
                                                <small style="color: var(--admin-text-muted);">@history.CreatedAt.ToString("dd/MM HH:mm")</small>
                                            </div>
                                            @if (!string.IsNullOrEmpty(history.Notes))
                                            {
                                                <small style="color: var(--admin-text-muted); display: block;">@history.Notes</small>
                                            }
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                }

                <!-- Quick Actions -->
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3 class="admin-card-title">
                            <i data-lucide="zap" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 0.5rem;"></i>
                            Hành động nhanh
                        </h3>
                    </div>
                    <div class="admin-card-body">
                        <div style="display: grid; gap: 0.5rem;">
                            @if (Model.AvailableStatusTransitions.Contains("processing"))
                            {
                                <button type="button" class="admin-btn admin-btn-success" onclick="quickUpdateStatus('processing')" style="width: 100%;">
                                    <i data-lucide="check"></i>
                                    Duyệt đơn hàng
                                </button>
                            }
                            @if (Model.AvailableStatusTransitions.Contains("shipped"))
                            {
                                <button type="button" class="admin-btn admin-btn-primary" onclick="quickUpdateStatus('shipped')" style="width: 100%;">
                                    <i data-lucide="truck"></i>
                                    Đánh dấu đã gửi
                                </button>
                            }
                            @if (Model.AvailableStatusTransitions.Contains("delivered"))
                            {
                                <button type="button" class="admin-btn admin-btn-info" onclick="quickUpdateStatus('delivered')" style="width: 100%;">
                                    <i data-lucide="package-check"></i>
                                    Xác nhận đã giao
                                </button>
                            }
                            @if (Model.AvailableStatusTransitions.Contains("cancelled"))
                            {
                                <button type="button" class="admin-btn admin-btn-danger" onclick="quickUpdateStatus('cancelled')" style="width: 100%;">
                                    <i data-lucide="x-circle"></i>
                                    Hủy đơn hàng
                                </button>
                            }
                            <button type="button" class="admin-btn admin-btn-secondary" onclick="window.print()" style="width: 100%;">
                                <i data-lucide="printer"></i>
                                In hóa đơn
                            </button>
                            <a href="mailto:@Model.CustomerEmail" class="admin-btn admin-btn-secondary" style="width: 100%; text-decoration: none;">
                                <i data-lucide="mail"></i>
                                Liên hệ khách hàng
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Update Status Modal -->
<div class="modal fade" id="updateStatusModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i data-lucide="edit" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 0.5rem;"></i>
                    Cập nhật trạng thái đơn hàng
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="newStatus" class="admin-form-label">Trạng thái mới</label>
                    <select class="admin-form-select" id="newStatus">
                        <option value="">-- Chọn trạng thái --</option>
                        @foreach (var status in Model.AvailableStatusTransitions)
                        {
                            <option value="@status">@GetStatusText(status)</option>
                        }
                    </select>
                </div>
                <div class="mb-3">
                    <label for="notes" class="admin-form-label">Ghi chú (tùy chọn)</label>
                    <textarea class="admin-form-input" id="notes" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="admin-btn admin-btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="admin-btn admin-btn-primary" onclick="submitStatusUpdate()">
                    <i data-lucide="check"></i>
                    Cập nhật
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            
            // Re-initialize icons after modal opens
            const modal = document.getElementById('updateStatusModal');
            if (modal) {
                modal.addEventListener('shown.bs.modal', function() {
                    lucide.createIcons();
                });
            }
        });

        function quickUpdateStatus(newStatus) {
            const statusText = {
                'processing': 'duyệt đơn hàng',
                'shipped': 'đánh dấu đơn hàng đã gửi',
                'delivered': 'xác nhận đơn hàng đã giao',
                'cancelled': 'hủy đơn hàng'
            };
            
            if (confirm(`Bạn có chắc chắn muốn ${statusText[newStatus]}?`)) {
                updateOrderStatus(newStatus, null);
            }
        }

        function submitStatusUpdate() {
            const newStatus = document.getElementById('newStatus').value;
            const notes = document.getElementById('notes').value;
            
            if (!newStatus) {
                showToast('error', 'Vui lòng chọn trạng thái mới.');
                return;
            }
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('updateStatusModal'));
            modal.hide();
            
            updateOrderStatus(newStatus, notes);
        }

        function updateOrderStatus(newStatus, notes) {
            const token = document.querySelector('input[name="__RequestVerificationToken"]')?.value;
            
            fetch('@Url.Action("UpdateOrderStatus", "Seller")', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams({
                    orderId: '@Model.OrderId',
                    newStatus: newStatus,
                    notes: notes || '',
                    __RequestVerificationToken: token
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showToast('success', data.message);
                    setTimeout(() => window.location.reload(), 1500);
                } else {
                    showToast('error', 'Lỗi: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showToast('error', 'Đã xảy ra lỗi khi cập nhật trạng thái. Vui lòng thử lại.');
            });
        }

        // Toast notification helper
        function showToast(type, message) {
            const toast = document.createElement('div');
            toast.className = `alert alert-${type === 'success' ? 'success' : 'danger'} alert-dismissible fade show`;
            toast.style.cssText = 'position: fixed; top: 70px; right: 20px; z-index: 1050; min-width: 300px;';
            toast.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
    </script>
    
    @Html.AntiForgeryToken()

    <style>
        .timeline {
            position: relative;
            padding-left: 2rem;
        }
        
        .timeline-item {
            position: relative;
            padding-bottom: 1.5rem;
        }
        
        .timeline-item:last-child {
            padding-bottom: 0;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.4375rem;
            top: 0.5rem;
            bottom: -0.5rem;
            width: 2px;
            background-color: var(--admin-border);
        }
        
        .timeline-item:last-child::before {
            display: none;
        }
        
        .timeline-marker {
            position: absolute;
            left: -1.75rem;
            top: 0.25rem;
            width: 0.875rem;
            height: 0.875rem;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 0 2px currentColor;
        }
        
        .timeline-marker.bg-warning { background-color: var(--admin-warning); }
        .timeline-marker.bg-info { background-color: var(--admin-info); }
        .timeline-marker.bg-primary { background-color: var(--admin-primary); }
        .timeline-marker.bg-success { background-color: var(--admin-success); }
        .timeline-marker.bg-danger { background-color: var(--admin-danger); }
        .timeline-marker.bg-secondary { background-color: var(--admin-text-muted); }
        
        .timeline-content {
            padding-left: 0.5rem;
        }
        
        @@media print {
            .admin-header,
            .admin-card:last-child {
                display: none !important;
            }
        }
        
        @@media (max-width: 991px) {
            .admin-content > div > div {
                grid-template-columns: 1fr !important;
            }
        }
    </style>
}
