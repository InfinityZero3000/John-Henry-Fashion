@model JohnHenryFashionWeb.Models.EmailCampaign
@{
    ViewData["Title"] = "Tạo Email Campaign mới";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Breadcrumb"] = "<li class=\"breadcrumb-item\"><a href=\"/admin/marketing\">Marketing</a></li><li class=\"breadcrumb-item\"><a href=\"/admin/marketing/email\">Email Campaigns</a></li><li class=\"breadcrumb-item active\">Tạo mới</li>";
}

<div class="admin-content">
    <div class="admin-page-header">
        <h1 class="admin-page-title">
            <i data-lucide="mail-plus"></i>
            Tạo Email Campaign mới
        </h1>
    </div>

    <div class="admin-card">
        <div class="admin-card-body">
            <form method="post" action="/admin/marketing/email/create">
                @Html.AntiForgeryToken()
                
                <div class="admin-form-section">
                    <h3 class="admin-form-section-title"><i data-lucide="info"></i> Thông tin cơ bản</h3>
                    <div class="mb-3">
                        <label for="Name" class="form-label">Tên Campaign <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="Name" name="Name" required />
                    </div>
                    <div class="mb-3">
                        <label for="Subject" class="form-label">Subject Email <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="Subject" name="Subject" required />
                    </div>
                </div>

                <div class="admin-form-section">
                    <h3 class="admin-form-section-title"><i data-lucide="file-text"></i> Nội dung</h3>
                    <div class="mb-3">
                        <label for="HtmlContent" class="form-label">HTML Content <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="HtmlContent" name="HtmlContent" rows="10" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="PlainTextContent" class="form-label">Plain Text</label>
                        <textarea class="form-control" id="PlainTextContent" name="PlainTextContent" rows="5"></textarea>
                    </div>
                </div>

                <div class="admin-form-section">
                    <h3 class="admin-form-section-title"><i data-lucide="users"></i> Đối tượng & Trạng thái</h3>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="TargetAudience" class="form-label">Đối tượng</label>
                            <select class="form-select" id="TargetAudience" name="TargetAudience">
                                <option value="all">Tất cả</option>
                                <option value="customers">Khách hàng</option>
                                <option value="sellers">Người bán</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="Status" class="form-label">Trạng thái</label>
                            <select class="form-select" id="Status" name="Status">
                                <option value="draft">Nháp</option>
                                <option value="scheduled">Lên lịch</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="ScheduledAt" class="form-label">Thời gian gửi</label>
                            <input type="datetime-local" class="form-control" id="ScheduledAt" name="ScheduledAt" />
                        </div>
                    </div>
                </div>

            <div class="mb-3">
                <label class="form-label">Target Segment Criteria (JSON)</label>
                <textarea class="form-control" name="TargetSegmentCriteria" rows="3">@Model.TargetSegmentCriteria</textarea>
            </div>

                <div class="admin-form-actions" style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--admin-border-color);">
                    <button type="submit" class="admin-btn admin-btn-primary admin-btn-lg">
                        <i data-lucide="send"></i> Tạo Campaign
                    </button>
                    <a href="/admin/marketing/email" class="admin-btn admin-btn-secondary admin-btn-lg">
                        <i data-lucide="x"></i> Hủy
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js"></script>
    <script>
        lucide.createIcons();
        tinymce.init({
            selector: '#HtmlContent',
            height: 500,
            plugins: 'code link image lists table',
            toolbar: 'undo redo | bold italic | bullist numlist | link image | code'
        });
    </script>
}
